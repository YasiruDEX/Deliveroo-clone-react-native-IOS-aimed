"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./_chunks/constants-Q2W1tUXO.cjs");exports.definePreviewUrl=function(r){const{draftMode:t,origin:n=("undefined"==typeof location?"https://localhost":location.origin)}=r;let{preview:i="/"}=r;const a=new URL(i,n),o=t.enable?new URL(t.enable,n):void 0;return async t=>{try{if(t.previewSearchParam){const e=new URL(t.previewSearchParam,a);e.origin===a.origin&&(i=`${e.pathname}${e.search}`)}else if(t.referrer){const e=new URL(t.referrer);e.origin===a.origin&&(i=`${e.pathname}${e.search}`)}}catch{}"undefined"!=typeof location&&location.origin===a.origin&&t.studioBasePath&&(i.startsWith(`${t.studioBasePath}/`)||i===t.studioBasePath)&&(i=r.preview||"/");const n=new URL(i,a);if(o){const r=new URL(o),{searchParams:i}=r;return i.set(e.u,t.previewUrlSecret),n.pathname!==r.pathname&&i.set(e.b,`${n.pathname}${n.search}`),r.toString()}return n.toString()}};//# sourceMappingURL=define-preview-url.cjs.map
