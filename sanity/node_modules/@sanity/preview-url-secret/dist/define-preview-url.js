import{u as e,b as t}from"./_chunks/constants-BZ2GbOYw.js";function n(n){const{draftMode:r,origin:a=("undefined"==typeof location?"https://localhost":location.origin)}=n;let{preview:i="/"}=n;const o=new URL(i,a),s=r.enable?new URL(r.enable,a):void 0;return async r=>{try{if(r.previewSearchParam){const e=new URL(r.previewSearchParam,o);e.origin===o.origin&&(i=`${e.pathname}${e.search}`)}else if(r.referrer){const e=new URL(r.referrer);e.origin===o.origin&&(i=`${e.pathname}${e.search}`)}}catch{}"undefined"!=typeof location&&location.origin===o.origin&&r.studioBasePath&&(i.startsWith(`${r.studioBasePath}/`)||i===r.studioBasePath)&&(i=n.preview||"/");const a=new URL(i,o);if(s){const n=new URL(s),{searchParams:i}=n;return i.set(e,r.previewUrlSecret),a.pathname!==n.pathname&&i.set(t,`${a.pathname}${a.search}`),n.toString()}return a.toString()}}export{n as definePreviewUrl};//# sourceMappingURL=define-preview-url.js.map
